{% comment %}
  Custom Main Account Page
  Replaces default Shopify account dashboard.
{% endcomment %}

<div class="account-page">
  <!-- Sidebar -->
  <aside class="account-sidebar">
    <h3>My Account</h3>
    <ul>
      <li><a href="/account">Dashboard</a></li>
      <li><a href="/account/orders">My Orders</a></li>
      <li><a href="/account/addresses">My Addresses</a></li>
      <li><a href="/account/logout">Log Out</a></li>
    </ul>
  </aside>

  <!-- Content -->
  <section class="account-content">
    <h2>Welcome back, {{ customer.first_name | default: customer.email }}!</h2>

    <!-- Customer Info -->
    <div class="account-card">
      <h3>Account Info</h3>
      <p><strong>Email:</strong> {{ customer.email }}</p>
      <p><a href="/account/addresses">Manage addresses</a></p>
    </div>

    <!-- Orders -->
    <div class="account-card">
      <h3>Recent Orders</h3>
      {% if customer.orders_count > 0 %}
        <table class="orders-table">
          <thead>
            <tr>
              <th>Order</th>
              <th>Date</th>
              <th>Status</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            {% for order in customer.orders limit:5 %}
              <tr>
                <td><a href="{{ order.customer_url }}">#{{ order.name }}</a></td>
                <td>{{ order.created_at | date: "%b %d, %Y" }}</td>
                <td>{{ order.financial_status }}</td>
                <td>{{ order.total_price | money }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p>No orders found.</p>
      {% endif %}
    </div>
  </section>
</div>

<style>
  .account-page {
    display: flex;
    gap: 2rem;
    margin: 2rem 0;
  }
  .account-sidebar {
    width: 220px;
    background: #f9f9f9;
    padding: 1.5rem;
    border-radius: 8px;
    border: 1px solid #e5e5e5;
  }
  .account-sidebar h3 {
    margin-bottom: 1rem;
    font-size: 1.1rem;
  }
  .account-sidebar ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .account-sidebar li {
    margin-bottom: 0.75rem;
  }
  .account-sidebar a {
    color: #333;
    text-decoration: none;
    font-weight: 500;
  }
  .account-sidebar a:hover {
    color: #0077cc;
  }
  .account-content {
    flex: 1;
  }
  .account-card {
    background: #fff;
    border: 1px solid #e5e5e5;
    border-radius: 8px;
    padding: 1.5rem;
    margin-bottom: 2rem;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
  }
  .orders-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
  }
  .orders-table th,
  .orders-table td {
    padding: 0.75rem;
    border-bottom: 1px solid #eee;
    text-align: left;
  }
  .orders-table th {
    background: #fafafa;
  }
</style>
